[
  {
    "name": "ask_user",
    "description": "Asks the user a specific question to clarify requirements or request confirmation. Use this when you need input before proceeding.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "question": {
          "type": "STRING",
          "description": "The question to ask the user."
        }
      },
      "required": ["question"]
    }
  },
  {
    "name": "manage_scratchpad",
    "description": "Read, write, or update the persistent session scratchpad. Use this to keep track of plans, completed tasks, or architectural notes so you don't forget them.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "action": {
          "type": "STRING",
          "description": "The operation to perform: 'read', 'write' (overwrite), 'append', or 'clear'.",
          "enum": ["read", "write", "append", "clear"]
        },
        "content": {
          "type": "STRING",
          "description": "The text content to write or append. Required for 'write' and 'append' actions."
        }
      },
      "required": ["action"]
    }
  },
  {
    "name": "update_file",
    "description": "Overwrites a specific file with new content. Use this to save code or text to a file.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "filepath": {
          "type": "STRING",
          "description": "The path to the file to write (e.g., ./README.md)"
        },
        "content": {
          "type": "STRING",
          "description": "The full text content to write into the file"
        }
      },
      "required": ["filepath", "content"]
    }
  },
  {
    "name": "replace_text",
    "description": "Replaces a specific text block in a file with new content. Replaces only the first occurrence found.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "filepath": {
          "type": "STRING",
          "description": "The path to the file to edit."
        },
        "old_text": {
          "type": "STRING",
          "description": "The exact text block to find and replace."
        },
        "new_text": {
          "type": "STRING",
          "description": "The new text to insert."
        }
      },
      "required": ["filepath", "old_text", "new_text"]
    }
  },
  {
    "name": "insert_text",
    "description": "Inserts text into a file at a specific line number. useful for adding imports, functions, or configuration lines.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "filepath": {
          "type": "STRING",
          "description": "The path to the file to edit."
        },
        "text": {
          "type": "STRING",
          "description": "The text content to insert."
        },
        "line_number": {
          "type": "INTEGER",
          "description": "The line number to use as a reference."
        },
        "placement": {
          "type": "STRING",
          "description": "Where to insert relative to the line number ('before' or 'after').",
          "enum": ["before", "after"]
        }
      },
      "required": ["filepath", "text", "line_number", "placement"]
    }
  },
  {
    "name": "apply_patch",
    "description": "Applies a unified diff patch to files. Use this for complex edits or multiple changes in one go. The patch must have standard headers (--- a/file +++ b/file) and use context.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "patch_content": {
          "type": "STRING",
          "description": "The full text of the unified diff/patch."
        }
      },
      "required": ["patch_content"]
    }
  },
  {
    "name": "rollback_file",
    "description": "Reverts a file to its state before the last AI modification. Use this immediately if an edit breaks something.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "filepath": {
          "type": "STRING",
          "description": "The path to the file to rollback."
        }
      },
      "required": ["filepath"]
    }
  },
  {
    "name": "move_file",
    "description": "Moves or renames a file or directory. Source and destination must be within the current working directory.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "source_path": {
          "type": "STRING",
          "description": "The path to the file or directory to move."
        },
        "dest_path": {
          "type": "STRING",
          "description": "The destination path."
        }
      },
      "required": ["source_path", "dest_path"]
    }
  },
  {
    "name": "delete_file",
    "description": "Deletes a specific file or directory. Use with caution.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "filepath": {
          "type": "STRING",
          "description": "The path to the file or directory to delete."
        }
      },
      "required": ["filepath"]
    }
  },
  {
    "name": "list_files",
    "description": "Lists files and directories in the specified path. Use this to explore the file system structure.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "path": {
          "type": "STRING",
          "description": "The directory path to list (defaults to current directory '.')",
          "default": "."
        }
      },
      "required": ["path"]
    }
  },
  {
    "name": "get_file_info",
    "description": "Retrieves metadata (size, modified date, permissions, type) for a specific file or directory.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "filepath": {
          "type": "STRING",
          "description": "The path to the file or directory."
        }
      },
      "required": ["filepath"]
    }
  },
  {
    "name": "read_file",
    "description": "Reads the content of a specific file. Supports pagination via line ranges. For large files, consider using 'get_file_skeleton' first to save tokens.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "filepath": {
          "type": "STRING",
          "description": "The path to the file to read (e.g., ./src/main.py)"
        },
        "start_line": {
          "type": "INTEGER",
          "description": "The line number to start reading from (default: 1)."
        },
        "end_line": {
          "type": "INTEGER",
          "description": "The line number to stop reading at (optional, reads to end if omitted)."
        }
      },
      "required": ["filepath"]
    }
  },
  {
    "name": "read_image",
    "description": "Reads an image file and injects it into the conversation context for analysis. Use this to analyze UI mockups, screenshots, or assets.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "filepath": {
          "type": "STRING",
          "description": "The path to the image file (e.g., ./assets/logo.png)."
        }
      },
      "required": ["filepath"]
    }
  },
  {
    "name": "read_url",
    "description": "Fetches the content of a specific URL. Useful for reading documentation, raw code files, or issue threads.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "url": {
          "type": "STRING",
          "description": "The URL to fetch."
        }
      },
      "required": ["url"]
    }
  },
  {
    "name": "search_files",
    "description": "Searches for a text pattern in files within a directory. Use this to find code usage or definitions.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "query": {
          "type": "STRING",
          "description": "The string or regex to search for."
        },
        "path": {
          "type": "STRING",
          "description": "The directory to search (defaults to '.')",
          "default": "."
        }
      },
      "required": ["query"]
    }
  },
  {
    "name": "grep_definitions",
    "description": "Searches for code definitions (functions, classes, structs) within files. useful for mapping project structure.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "path": {
          "type": "STRING",
          "description": "The directory path to search."
        },
        "query": {
          "type": "STRING",
          "description": "Optional name pattern to filter definitions (regex)."
        }
      },
      "required": ["path"]
    }
  },
  {
    "name": "find_file",
    "description": "Finds files based on name patterns using the 'find' command.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "path": {
          "type": "STRING",
          "description": "The directory path to start the search (defaults to '.')",
          "default": "."
        },
        "name_pattern": {
          "type": "STRING",
          "description": "The file name pattern to search for (e.g., '*.sh', 'config.*')."
        },
        "type": {
          "type": "STRING",
          "description": "The type of file to search for (f=file, d=directory). Optional."
        }
      },
      "required": ["name_pattern"]
    }
  },
  {
    "name": "get_tree",
    "description": "Returns a visual directory tree structure. Respects standard ignore rules (node_modules, .git, etc). Use this to understand project architecture.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "path": {
          "type": "STRING",
          "description": "The directory path to list (defaults to current directory '.')",
          "default": "."
        },
        "max_depth": {
          "type": "INTEGER",
          "description": "Depth of the tree (default 2)",
          "default": 2
        }
      },
      "required": ["path"]
    }
  },
  {
    "name": "execute_command",
    "description": "Executes a shell command. Use this to run tests, list complex directories, or check system status. Commands are executed in the current shell environment.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "command": {
          "type": "STRING",
          "description": "The shell command to execute (e.g., 'ls -la', 'python3 main.py')."
        }
      },
      "required": ["command"]
    }
  },
  {
    "name": "get_git_diff",
    "description": "Retrieves the git diff of the current repository.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "staged": {
          "type": "BOOLEAN",
          "description": "If true, shows staged changes.",
          "default": false
        }
      }
    }
  },
  {
    "name": "read_git_commit",
    "description": "Retrieves the full details (message and diff) of a specific git commit.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "hash": {
          "type": "STRING",
          "description": "The commit hash to inspect."
        }
      },
      "required": ["hash"]
    }
  },
  {
    "name": "get_git_log",
    "description": "Retrieves the git commit log. useful for understanding project history or finding specific changes.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "limit": {
          "type": "INTEGER",
          "description": "Number of commits to show (default: 10).",
          "default": 10
        },
        "filepath": {
          "type": "STRING",
          "description": "Optional file path to filter the log for a specific file."
        }
      }
    }
  },
  {
    "name": "get_git_status",
    "description": "Retrieves the current status of the git repository, including the current branch and a concise list of modified, staged, and untracked files.",
    "parameters": {
      "type": "OBJECT",
      "properties": {}
    }
  },
  {
    "name": "get_git_blame",
    "description": "Retrieves the git blame information for a specific file to determine who last modified lines and when.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "filepath": {
          "type": "STRING",
          "description": "The path to the file."
        },
        "start_line": {
          "type": "INTEGER",
          "description": "Start line number (default: 1)."
        },
        "end_line": {
          "type": "INTEGER",
          "description": "End line number (optional)."
        }
      },
      "required": ["filepath"]
    }
  },
  {
    "name": "get_file_skeleton",
    "description": "Returns the skeleton (function signatures, classes, structs, and docstrings) of a source code file, omitting function bodies. Useful for understanding large files without reading the full content.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "filepath": {
          "type": "STRING",
          "description": "The path to the source code file."
        }
      },
      "required": ["filepath"]
    }
  },
  {
    "name": "run_tests",
    "description": "Executes a test command and returns a concise summary. If the tests pass, returns 'PASS'. If they fail, returns the error output to help diagnose the issue.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "command": {
          "type": "STRING",
          "description": "The test command to execute (e.g., 'pytest tests/', 'npm test', 'go test ./...')."
        }
      },
      "required": ["command"]
    }
  },
  {
    "name": "validate_syntax",
    "description": "Checks the syntax of a source code file without executing it. Supports Bash, Python, JSON, and JS.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "filepath": {
          "type": "STRING",
          "description": "The path to the file to validate."
        }
      },
      "required": ["filepath"]
    }
  },
  {
    "name": "manage_tasks",
    "description": "Manages a todo list of tasks. Supports adding, updating, listing, and deleting tasks.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "action": {
          "type": "STRING",
          "description": "The action to perform: 'add', 'update', 'list', 'delete', 'clear'.",
          "enum": ["add", "update", "list", "delete", "clear"]
        },
        "content": {
          "type": "STRING",
          "description": "The task description (required for 'add')."
        },
        "task_id": {
          "type": "INTEGER",
          "description": "The ID of the task to update or delete."
        },
        "status": {
          "type": "STRING",
          "description": "The new status (e.g., 'completed', 'pending') for 'update' or filter for 'list'."
        }
      },
      "required": ["action"]
    }
  }
]
